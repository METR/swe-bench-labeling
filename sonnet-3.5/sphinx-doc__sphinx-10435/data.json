{"instance_id": "sphinx-doc__sphinx-10435", "score": "I", "diff": "diff --git a/sphinx/writers/latex.py b/sphinx/writers/latex.py\nindex e0c7d56f8..afe02a045 100644\n--- a/sphinx/writers/latex.py\n+++ b/sphinx/writers/latex.py\n@@ -1713,8 +1713,9 @@ class LaTeXTranslator(SphinxTranslator):\n                                 r'\\sphinxcode{\\sphinxupquote{')\n         # get consistent trailer\n         hlcode = hlcode.rstrip()[:-14]  # strip \\end{Verbatim}\n-        self.body.append(hlcode)\n-        self.body.append('}}')\n+        # Remove leading and trailing whitespace\n+        hlcode = hlcode.strip()\n+        self.body.append(r'\\sphinxcode{\\sphinxupquote{%s}}' % hlcode)\n         raise nodes.SkipNode\n \n     def depart_literal(self, node: Element) -> None:\ndiff --git a/tox.ini b/tox.ini\nindex 105a02597..90ada0821 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -29,7 +29,7 @@ setenv =\n     PYTHONWARNINGS = all\n     PYTEST_ADDOPTS = {env:PYTEST_ADDOPTS:} --color yes\n commands=\n-    python -X dev -X warn_default_encoding -m pytest --durations 25 {posargs}\n+    python -X dev -X warn_default_encoding -m pytest -rA --durations 25 {posargs}\n \n [testenv:du-latest]\n commands =\n", "gold_standard_diff": "From 97f4a036d1744fd8af8f7b85b01353d5a9ceb393 Mon Sep 17 00:00:00 2001\nFrom: jfbu <2589111+jfbu@users.noreply.github.com>\nDate: Sun, 8 May 2022 11:32:37 +0200\nSubject: [PATCH] Fix #10434: extra whitespace in pdf output for highlighted\n inline code\n\nRelated: #10251\n---\n sphinx/writers/latex.py   | 6 +++---\n tests/test_build_latex.py | 4 ++--\n 2 files changed, 5 insertions(+), 5 deletions(-)\n\ndiff --git a/sphinx/writers/latex.py b/sphinx/writers/latex.py\nindex e0c7d56f8ec..f275100e9d7 100644\n--- a/sphinx/writers/latex.py\n+++ b/sphinx/writers/latex.py\n@@ -1710,11 +1710,11 @@ def visit_literal(self, node: Element) -> None:\n         # TODO: Use nowrap option once LaTeX formatter supports it\n         # https://github.com/pygments/pygments/pull/1343\n         hlcode = hlcode.replace(r'\\begin{Verbatim}[commandchars=\\\\\\{\\}]',\n-                                r'\\sphinxcode{\\sphinxupquote{')\n+                                r'\\sphinxcode{\\sphinxupquote{%')\n         # get consistent trailer\n-        hlcode = hlcode.rstrip()[:-14]  # strip \\end{Verbatim}\n+        hlcode = hlcode.rstrip()[:-15]  # strip \\n\\end{Verbatim}\n         self.body.append(hlcode)\n-        self.body.append('}}')\n+        self.body.append('%' + CR + '}}')\n         raise nodes.SkipNode\n \n     def depart_literal(self, node: Element) -> None:\ndiff --git a/tests/test_build_latex.py b/tests/test_build_latex.py\nindex dd0db8aeffd..709dce05db4 100644\n--- a/tests/test_build_latex.py\n+++ b/tests/test_build_latex.py\n@@ -1623,7 +1623,7 @@ def test_latex_code_role(app):\n         r'\\PYG{p}{)}'\n         r'\\PYG{p}{:} '\n         r'\\PYG{k}{pass}')\n-    assert (r'Inline \\sphinxcode{\\sphinxupquote{' + '\\n' +\n-            common_content + '\\n}} code block') in content\n+    assert (r'Inline \\sphinxcode{\\sphinxupquote{%' + '\\n' +\n+            common_content + '%\\n}} code block') in content\n     assert (r'\\begin{sphinxVerbatim}[commandchars=\\\\\\{\\}]' +\n             '\\n' + common_content + '\\n' + r'\\end{sphinxVerbatim}') in content\n", "gold_standard_pr_link": "https://github.com/sphinx-doc/sphinx/pull/10435"}