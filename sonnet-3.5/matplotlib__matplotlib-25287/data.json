{"instance_id": "matplotlib__matplotlib-25287", "score": "I", "diff": "diff --git a/lib/matplotlib/axis.py b/lib/matplotlib/axis.py\nindex c0e706e2b3..b50ce671c0 100644\n--- a/lib/matplotlib/axis.py\n+++ b/lib/matplotlib/axis.py\n@@ -2231,6 +2231,8 @@ class XAxis(Axis):\n     _tick_class = XTick\n \n     def __init__(self, *args, **kwargs):\n+        super().__init__(*args, **kwargs)\n+        self.offset_text.update({\"color\": mpl.rcParams[\"xtick.labelcolor\"] if mpl.rcParams[\"xtick.labelcolor\"] != \"inherit\" else mpl.rcParams[\"xtick.color\"]})\n         super().__init__(*args, **kwargs)\n         self._init()\n \n@@ -2490,6 +2492,8 @@ class YAxis(Axis):\n     _tick_class = YTick\n \n     def __init__(self, *args, **kwargs):\n+        super().__init__(*args, **kwargs)\n+        self.offset_text.update({\"color\": mpl.rcParams[\"ytick.labelcolor\"] if mpl.rcParams[\"ytick.labelcolor\"] != \"inherit\" else mpl.rcParams[\"ytick.color\"]})\n         super().__init__(*args, **kwargs)\n         self._init()\n \n", "gold_standard_diff": "From e9ebc6693d5f523ae1787c85fa25ca4bbe96193c Mon Sep 17 00:00:00 2001\nFrom: devRD <ratnabalidutta26@gmail.com>\nDate: Wed, 22 Feb 2023 23:45:37 +0530\nSubject: [PATCH 1/3] Fix unmatched offsetText label color\n\n---\n lib/matplotlib/axis.py            |  8 ++++++--\n lib/matplotlib/tests/test_axes.py | 30 ++++++++++++++++++++++++++++++\n 2 files changed, 36 insertions(+), 2 deletions(-)\n\ndiff --git a/lib/matplotlib/axis.py b/lib/matplotlib/axis.py\nindex 6da0999e92bc..575f5f61fdcb 100644\n--- a/lib/matplotlib/axis.py\n+++ b/lib/matplotlib/axis.py\n@@ -2259,7 +2259,9 @@ def _init(self):\n             transform=mtransforms.blended_transform_factory(\n                 self.axes.transAxes, mtransforms.IdentityTransform()),\n             fontsize=mpl.rcParams['xtick.labelsize'],\n-            color=mpl.rcParams['xtick.color'],\n+            color=mpl.rcParams['xtick.color'] if\n+            mpl.rcParams['xtick.labelcolor'] == 'inherit' else\n+            mpl.rcParams['xtick.labelcolor'],\n         )\n         self.offset_text_position = 'bottom'\n \n@@ -2519,7 +2521,9 @@ def _init(self):\n             transform=mtransforms.blended_transform_factory(\n                 self.axes.transAxes, mtransforms.IdentityTransform()),\n             fontsize=mpl.rcParams['ytick.labelsize'],\n-            color=mpl.rcParams['ytick.color'],\n+            color=mpl.rcParams['ytick.color'] if\n+            mpl.rcParams['ytick.labelcolor'] == 'inherit' else\n+            mpl.rcParams['ytick.labelcolor'],\n         )\n         self.offset_text_position = 'left'\n \ndiff --git a/lib/matplotlib/tests/test_axes.py b/lib/matplotlib/tests/test_axes.py\nindex b12b5d0bab46..62722b116e96 100644\n--- a/lib/matplotlib/tests/test_axes.py\n+++ b/lib/matplotlib/tests/test_axes.py\n@@ -7811,6 +7811,36 @@ def test_ytickcolor_is_not_yticklabelcolor():\n         assert tick.label1.get_color() == 'blue'\n \n \n+def test_xticklabelcolor_if_not_xtickcolor():\n+    plt.rcParams['xtick.labelcolor'] = 'blue'\n+    ax = plt.axes()\n+    ticks = ax.xaxis.get_major_ticks()\n+    for tick in ticks:\n+        assert tick.label1.get_color() == 'blue'\n+\n+    plt.rcParams['xtick.color'] = 'yellow'\n+    plt.rcParams['xtick.labelcolor'] = 'inherit'\n+    ax = plt.axes()\n+    ticks = ax.xaxis.get_major_ticks()\n+    for tick in ticks:\n+        assert tick.label1.get_color() == 'yellow'\n+\n+\n+def test_yticklabelcolor_if_not_ytickcolor():\n+    plt.rcParams['ytick.labelcolor'] = 'green'\n+    ax = plt.axes()\n+    ticks = ax.yaxis.get_major_ticks()\n+    for tick in ticks:\n+        assert tick.label1.get_color() == 'green'\n+\n+    plt.rcParams['ytick.color'] = 'red'\n+    plt.rcParams['ytick.labelcolor'] = 'inherit'\n+    ax = plt.axes()\n+    ticks = ax.yaxis.get_major_ticks()\n+    for tick in ticks:\n+        assert tick.label1.get_color() == 'red'\n+\n+\n @pytest.mark.parametrize('size', [size for size in mfont_manager.font_scalings\n                                   if size is not None] + [8, 10, 12])\n @mpl.style.context('default')\n\nFrom 0e55ef1b5280730ec094ae77b43d5d9a5c3dae92 Mon Sep 17 00:00:00 2001\nFrom: devRD <ratnabalidutta26@gmail.com>\nDate: Fri, 24 Feb 2023 11:51:00 +0530\nSubject: [PATCH 2/3] Add conditional before set labelcolor call\n\n---\n lib/matplotlib/axis.py | 19 +++++++++++++------\n 1 file changed, 13 insertions(+), 6 deletions(-)\n\ndiff --git a/lib/matplotlib/axis.py b/lib/matplotlib/axis.py\nindex 575f5f61fdcb..0e98b76a79e8 100644\n--- a/lib/matplotlib/axis.py\n+++ b/lib/matplotlib/axis.py\n@@ -2253,15 +2253,18 @@ def _init(self):\n         )\n         self.label_position = 'bottom'\n \n+        if mpl.rcParams['xtick.labelcolor'] == 'inherit':\n+            tick_color = mpl.rcParams['xtick.color']\n+        else:\n+            tick_color = mpl.rcParams['xtick.labelcolor']\n+\n         self.offsetText.set(\n             x=1, y=0,\n             verticalalignment='top', horizontalalignment='right',\n             transform=mtransforms.blended_transform_factory(\n                 self.axes.transAxes, mtransforms.IdentityTransform()),\n             fontsize=mpl.rcParams['xtick.labelsize'],\n-            color=mpl.rcParams['xtick.color'] if\n-            mpl.rcParams['xtick.labelcolor'] == 'inherit' else\n-            mpl.rcParams['xtick.labelcolor'],\n+            color=tick_color\n         )\n         self.offset_text_position = 'bottom'\n \n@@ -2514,6 +2517,12 @@ def _init(self):\n                 mtransforms.IdentityTransform(), self.axes.transAxes),\n         )\n         self.label_position = 'left'\n+\n+        if mpl.rcParams['ytick.labelcolor'] == 'inherit':\n+            tick_color = mpl.rcParams['ytick.color']\n+        else:\n+            tick_color = mpl.rcParams['ytick.labelcolor']\n+\n         # x in axes coords, y in display coords(!).\n         self.offsetText.set(\n             x=0, y=0.5,\n@@ -2521,9 +2530,7 @@ def _init(self):\n             transform=mtransforms.blended_transform_factory(\n                 self.axes.transAxes, mtransforms.IdentityTransform()),\n             fontsize=mpl.rcParams['ytick.labelsize'],\n-            color=mpl.rcParams['ytick.color'] if\n-            mpl.rcParams['ytick.labelcolor'] == 'inherit' else\n-            mpl.rcParams['ytick.labelcolor'],\n+            color=tick_color\n         )\n         self.offset_text_position = 'left'\n \n\nFrom 264e7d37d2ee89c6019af4e5743653f4748448e1 Mon Sep 17 00:00:00 2001\nFrom: devRD <ratnabalidutta26@gmail.com>\nDate: Sat, 25 Feb 2023 11:25:28 +0530\nSubject: [PATCH 3/3] Update test to check offset text color\n\n---\n lib/matplotlib/tests/test_axes.py | 20 ++++++--------------\n 1 file changed, 6 insertions(+), 14 deletions(-)\n\ndiff --git a/lib/matplotlib/tests/test_axes.py b/lib/matplotlib/tests/test_axes.py\nindex 62722b116e96..c31edec05308 100644\n--- a/lib/matplotlib/tests/test_axes.py\n+++ b/lib/matplotlib/tests/test_axes.py\n@@ -7811,34 +7811,26 @@ def test_ytickcolor_is_not_yticklabelcolor():\n         assert tick.label1.get_color() == 'blue'\n \n \n-def test_xticklabelcolor_if_not_xtickcolor():\n+def test_xaxis_offsetText_color():\n     plt.rcParams['xtick.labelcolor'] = 'blue'\n     ax = plt.axes()\n-    ticks = ax.xaxis.get_major_ticks()\n-    for tick in ticks:\n-        assert tick.label1.get_color() == 'blue'\n+    assert ax.xaxis.offsetText.get_color() == 'blue'\n \n     plt.rcParams['xtick.color'] = 'yellow'\n     plt.rcParams['xtick.labelcolor'] = 'inherit'\n     ax = plt.axes()\n-    ticks = ax.xaxis.get_major_ticks()\n-    for tick in ticks:\n-        assert tick.label1.get_color() == 'yellow'\n+    assert ax.xaxis.offsetText.get_color() == 'yellow'\n \n \n-def test_yticklabelcolor_if_not_ytickcolor():\n+def test_yaxis_offsetText_color():\n     plt.rcParams['ytick.labelcolor'] = 'green'\n     ax = plt.axes()\n-    ticks = ax.yaxis.get_major_ticks()\n-    for tick in ticks:\n-        assert tick.label1.get_color() == 'green'\n+    assert ax.yaxis.offsetText.get_color() == 'green'\n \n     plt.rcParams['ytick.color'] = 'red'\n     plt.rcParams['ytick.labelcolor'] = 'inherit'\n     ax = plt.axes()\n-    ticks = ax.yaxis.get_major_ticks()\n-    for tick in ticks:\n-        assert tick.label1.get_color() == 'red'\n+    assert ax.yaxis.offsetText.get_color() == 'red'\n \n \n @pytest.mark.parametrize('size', [size for size in mfont_manager.font_scalings\n", "gold_standard_pr_link": "https://github.com/matplotlib/matplotlib/pull/25287"}