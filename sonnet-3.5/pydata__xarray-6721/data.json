{"instance_id": "pydata__xarray-6721", "score": "I", "diff": "diff --git a/xarray/core/dataset.py b/xarray/core/dataset.py\nindex 71646f50..bdc21f81 100644\n--- a/xarray/core/dataset.py\n+++ b/xarray/core/dataset.py\n@@ -2135,7 +2135,13 @@ class Dataset(\n         Dataset.chunksizes\n         xarray.unify_chunks\n         \"\"\"\n-        return get_chunksizes(self.variables.values())\n+        chunks = {}\n+        for name, var in self.variables.items():\n+            if 'chunks' in var.encoding:\n+                chunks[name] = var.encoding['chunks']\n+            elif hasattr(var.data, 'chunks'):\n+                chunks[name] = var.data.chunks\n+        return chunks\n \n     @property\n     def chunksizes(self) -> Mapping[Hashable, tuple[int, ...]]:\n@@ -2152,7 +2158,7 @@ class Dataset(\n         Dataset.chunks\n         xarray.unify_chunks\n         \"\"\"\n-        return get_chunksizes(self.variables.values())\n+        return self.chunks\n \n     def chunk(\n         self: T_Dataset,\n", "gold_standard_diff": "From 37b314228e6ac524c6ebfc60ca03e97387c2ad82 Mon Sep 17 00:00:00 2001\nFrom: dcherian <deepak@cherian.net>\nDate: Fri, 24 Jun 2022 12:42:12 -0600\nSubject: [PATCH 1/2] Fix .chunks loading lazy backed array data\n\nCloses #6538\n---\n doc/whats-new.rst     | 2 ++\n xarray/core/common.py | 2 +-\n 2 files changed, 3 insertions(+), 1 deletion(-)\n\ndiff --git a/doc/whats-new.rst b/doc/whats-new.rst\nindex 9badedbb8f2..6f8b20e6343 100644\n--- a/doc/whats-new.rst\n+++ b/doc/whats-new.rst\n@@ -193,6 +193,8 @@ Bug fixes\n - Fixed silent overflow issue when decoding times encoded with 32-bit and below\n   unsigned integer data types (:issue:`6589`, :pull:`6598`).\n   By `Spencer Clark <https://github.com/spencerkclark>`_.\n+- Fixed ``.chunks`` loading lazy data (:issue:`6538`).\n+  By `Deepak Cherian <https://github.com/dcherian>`_.\n \n Documentation\n ~~~~~~~~~~~~~\ndiff --git a/xarray/core/common.py b/xarray/core/common.py\nindex 3c328f42e98..a3636cbac66 100644\n--- a/xarray/core/common.py\n+++ b/xarray/core/common.py\n@@ -2023,7 +2023,7 @@ def get_chunksizes(\n \n     chunks: dict[Any, tuple[int, ...]] = {}\n     for v in variables:\n-        if hasattr(v.data, \"chunks\"):\n+        if hasattr(v._data, \"chunks\"):\n             for dim, c in v.chunksizes.items():\n                 if dim in chunks and c != chunks[dim]:\n                     raise ValueError(\n\nFrom 283affda2a6999d3e5e44ff1688af9ba9977f278 Mon Sep 17 00:00:00 2001\nFrom: dcherian <deepak@cherian.net>\nDate: Fri, 24 Jun 2022 13:21:08 -0600\nSubject: [PATCH 2/2] Add test\n\n---\n xarray/tests/test_dataset.py | 7 +++++++\n 1 file changed, 7 insertions(+)\n\ndiff --git a/xarray/tests/test_dataset.py b/xarray/tests/test_dataset.py\nindex e3ab430a833..bc5bf1c0f1c 100644\n--- a/xarray/tests/test_dataset.py\n+++ b/xarray/tests/test_dataset.py\n@@ -992,6 +992,13 @@ def test_attrs(self) -> None:\n         assert data.attrs[\"foobar\"], \"baz\"\n         assert isinstance(data.attrs, dict)\n \n+    def test_chunks_does_not_load_data(self) -> None:\n+        # regression test for GH6538\n+        store = InaccessibleVariableDataStore()\n+        create_test_data().dump_to_store(store)\n+        ds = open_dataset(store)\n+        assert ds.chunks == {}\n+\n     @requires_dask\n     def test_chunk(self) -> None:\n         data = create_test_data()\n", "gold_standard_pr_link": "https://github.com/pydata/xarray/pull/6721"}