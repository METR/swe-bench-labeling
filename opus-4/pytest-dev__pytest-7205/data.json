{"instance_id": "pytest-dev__pytest-7205", "score": "C", "diff": "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex c9cc589ff..9fc218a3e 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -1,4 +1,5 @@\n import pytest\n+from _pytest._io.saferepr import saferepr\n \n \n def pytest_addoption(parser):\n@@ -66,7 +67,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n", "gold_standard_diff": "diff --git a/AUTHORS b/AUTHORS\nindex b59ebc2a27f..68f156862c5 100644\n--- a/AUTHORS\n+++ b/AUTHORS\n@@ -216,6 +216,7 @@ Ond\u0159ej S\u00fakup\n Oscar Benjamin\n Patrick Hayes\n Pauli Virtanen\n+Pavel Karateev\n Pawe\u0142 Adamczak\n Pedro Algarvio\n Philipp Loose\ndiff --git a/changelog/7126.bugfix.rst b/changelog/7126.bugfix.rst\nnew file mode 100644\nindex 00000000000..1a85e899781\n--- /dev/null\n+++ b/changelog/7126.bugfix.rst\n@@ -0,0 +1,2 @@\n+``--setup-show`` now doesn't raise an error when a bytes value is used as a ``parametrize``\n+parameter when Python is called with the ``-bb`` flag.\ndiff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex c9cc589ffee..9e4cd951947 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -1,4 +1,5 @@\n import pytest\n+from _pytest._io.saferepr import saferepr\n \n \n def pytest_addoption(parser):\n@@ -66,7 +67,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param, maxsize=42)))\n \n     tw.flush()\n \ndiff --git a/testing/test_setuponly.py b/testing/test_setuponly.py\nindex e26a33dee38..221c32a310b 100644\n--- a/testing/test_setuponly.py\n+++ b/testing/test_setuponly.py\n@@ -1,3 +1,5 @@\n+import sys\n+\n import pytest\n from _pytest.config import ExitCode\n \n@@ -146,10 +148,10 @@ def test_arg1(arg_other):\n \n     result.stdout.fnmatch_lines(\n         [\n-            \"SETUP    S arg_same?foo?\",\n-            \"TEARDOWN S arg_same?foo?\",\n-            \"SETUP    S arg_same?bar?\",\n-            \"TEARDOWN S arg_same?bar?\",\n+            \"SETUP    S arg_same?'foo'?\",\n+            \"TEARDOWN S arg_same?'foo'?\",\n+            \"SETUP    S arg_same?'bar'?\",\n+            \"TEARDOWN S arg_same?'bar'?\",\n         ]\n     )\n \n@@ -179,7 +181,7 @@ def test_arg1(arg_other):\n     assert result.ret == 0\n \n     result.stdout.fnmatch_lines(\n-        [\"SETUP    S arg_same?spam?\", \"SETUP    S arg_same?ham?\"]\n+        [\"SETUP    S arg_same?'spam'?\", \"SETUP    S arg_same?'ham'?\"]\n     )\n \n \n@@ -198,7 +200,9 @@ def test_foobar(foobar):\n     result = testdir.runpytest(mode, p)\n     assert result.ret == 0\n \n-    result.stdout.fnmatch_lines([\"*SETUP    F foobar?FOO?\", \"*SETUP    F foobar?BAR?\"])\n+    result.stdout.fnmatch_lines(\n+        [\"*SETUP    F foobar?'FOO'?\", \"*SETUP    F foobar?'BAR'?\"]\n+    )\n \n \n def test_dynamic_fixture_request(testdir):\n@@ -292,3 +296,20 @@ def test_arg(arg):\n         ]\n     )\n     assert result.ret == ExitCode.INTERRUPTED\n+\n+\n+def test_show_fixture_action_with_bytes(testdir):\n+    # Issue 7126, BytesWarning when using --setup-show with bytes parameter\n+    test_file = testdir.makepyfile(\n+        \"\"\"\n+        import pytest\n+\n+        @pytest.mark.parametrize('data', [b'Hello World'])\n+        def test_data(data):\n+            pass\n+        \"\"\"\n+    )\n+    result = testdir.run(\n+        sys.executable, \"-bb\", \"-m\", \"pytest\", \"--setup-show\", str(test_file)\n+    )\n+    assert result.ret == 0\n", "gold_standard_pr_link": "https://github.com/pytest-dev/pytest/pull/7205"}