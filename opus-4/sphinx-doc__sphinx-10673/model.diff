diff --git a/sphinx/directives/other.py b/sphinx/directives/other.py
index 35e16e623..6b7c9bff8 100644
--- a/sphinx/directives/other.py
+++ b/sphinx/directives/other.py
@@ -118,6 +118,10 @@ class TocTree(SphinxDirective):
                 docname = docname_join(self.env.docname, docname)
                 if url_re.match(ref) or ref == 'self':
                     toctree['entries'].append((title, ref))
+                elif docname in ('genindex', 'modindex', 'search'):
+                    # handle special pages that are generated by Sphinx
+                    toctree['entries'].append((title, docname))
+                    toctree['includefiles'].append(docname)
                 elif docname not in self.env.found_docs:
                     if excluded(self.env.doc2path(docname, False)):
                         message = __('toctree contains reference to excluded document %r')
diff --git a/sphinx/environment/adapters/toctree.py b/sphinx/environment/adapters/toctree.py
index 9678e3c7c..d2c57697d 100644
--- a/sphinx/environment/adapters/toctree.py
+++ b/sphinx/environment/adapters/toctree.py
@@ -6,7 +6,7 @@ from docutils import nodes
 from docutils.nodes import Element, Node
 
 from sphinx import addnodes
-from sphinx.locale import __
+from sphinx.locale import _, __
 from sphinx.util import logging, url_re
 from sphinx.util.matching import Matcher
 from sphinx.util.nodes import clean_astext, process_only_nodes
@@ -165,7 +165,11 @@ class TocTree:
                                        ref, location=toctreenode)
                 except KeyError:
                     # this is raised if the included file does not exist
-                    if excluded(self.env.doc2path(ref, False)):
+                    # Check if it's a special page
+                    if ref in ('genindex', 'modindex', 'search'):
+                        # Special pages are handled differently, skip the warning
+                        continue
+                    elif excluded(self.env.doc2path(ref, False)):
                         message = __('toctree contains reference to excluded document %r')
                     elif not included(self.env.doc2path(ref, False)):
                         message = __('toctree contains reference to non-included document %r')
diff --git a/test_special_pages_debug.py b/test_special_pages_debug.py
new file mode 100644
index 000000000..f8e9b1258
--- /dev/null
+++ b/test_special_pages_debug.py
@@ -0,0 +1,69 @@
+"""Test to debug special pages in toctree"""
+import os
+import tempfile
+import shutil
+from sphinx.application import Sphinx
+from sphinx.errors import SphinxWarning
+
+def test_special_pages_in_toctree():
+    # Create a temporary directory
+    with tempfile.TemporaryDirectory() as tmpdir:
+        # Create source directory
+        srcdir = os.path.join(tmpdir, 'source')
+        os.makedirs(srcdir)
+        
+        # Create conf.py
+        conf_content = '''
+project = 'Test Project'
+extensions = []
+master_doc = 'index'
+'''
+        with open(os.path.join(srcdir, 'conf.py'), 'w') as f:
+            f.write(conf_content)
+        
+        # Create index.rst with toctree containing special pages and a regular doc
+        index_content = '''
+Test Project
+============
+
+.. toctree::
+   :maxdepth: 1
+   :caption: Contents
+
+   page1
+   genindex
+   modindex
+   search
+'''
+        with open(os.path.join(srcdir, 'index.rst'), 'w') as f:
+            f.write(index_content)
+        
+        # Create page1.rst
+        page1_content = '''
+Page 1
+======
+
+This is page 1.
+'''
+        with open(os.path.join(srcdir, 'page1.rst'), 'w') as f:
+            f.write(page1_content)
+        
+        # Build directory
+        builddir = os.path.join(tmpdir, 'build')
+        
+        # Create Sphinx application
+        app = Sphinx(srcdir, srcdir, builddir, builddir + '/doctrees', 'html', freshenv=True)
+        
+        # Build and check for warnings
+        try:
+            app.build()
+            print("Build successful!")
+        except Exception as e:
+            print(f"Build failed: {e}")
+        
+        # Check warnings
+        if app.statuscode != 0:
+            print(f"Build finished with status code: {app.statuscode}")
+
+if __name__ == '__main__':
+    test_special_pages_in_toctree()
diff --git a/test_special_pages_toctree.py b/test_special_pages_toctree.py
new file mode 100644
index 000000000..d466e4a56
--- /dev/null
+++ b/test_special_pages_toctree.py
@@ -0,0 +1,62 @@
+"""Test to reproduce the issue with special pages in toctree"""
+import os
+import tempfile
+import shutil
+from sphinx.application import Sphinx
+from sphinx.errors import SphinxWarning
+
+def test_special_pages_in_toctree():
+    # Create a temporary directory
+    with tempfile.TemporaryDirectory() as tmpdir:
+        # Create source directory
+        srcdir = os.path.join(tmpdir, 'source')
+        os.makedirs(srcdir)
+        
+        # Create conf.py
+        conf_content = '''
+project = 'Test Project'
+extensions = []
+master_doc = 'index'
+'''
+        with open(os.path.join(srcdir, 'conf.py'), 'w') as f:
+            f.write(conf_content)
+        
+        # Create index.rst with toctree containing special pages
+        index_content = '''
+Test Project
+============
+
+.. toctree::
+   :maxdepth: 1
+   :caption: Contents
+
+   genindex
+   modindex
+   search
+'''
+        with open(os.path.join(srcdir, 'index.rst'), 'w') as f:
+            f.write(index_content)
+        
+        # Build directory
+        builddir = os.path.join(tmpdir, 'build')
+        
+        # Create Sphinx application
+        app = Sphinx(srcdir, srcdir, builddir, builddir + '/doctrees', 'html')
+        
+        # Build and check for warnings
+        try:
+            app.build()
+            print("Build successful!")
+        except Exception as e:
+            print(f"Build failed: {e}")
+        
+        # Check warnings
+        if app.statuscode != 0:
+            print(f"Build finished with status code: {app.statuscode}")
+        
+        # Check for specific warnings
+        for warning in app._warning:
+            print(f"Warning: {warning}")
+
+if __name__ == '__main__':
+    test_special_pages_in_toctree()
diff --git a/tox.ini b/tox.ini
index 7ca990b56..a0708b02c 100644
--- a/tox.ini
+++ b/tox.ini
@@ -30,7 +30,7 @@ setenv =
     PYTHONWARNINGS = all
     PYTEST_ADDOPTS = {env:PYTEST_ADDOPTS:} --color yes
 commands=
-    python -X dev -X warn_default_encoding -m pytest --durations 25 {posargs}
+    python -X dev -X warn_default_encoding -m pytest -rA --durations 25 {posargs}
 
 [testenv:du-latest]
 commands =
