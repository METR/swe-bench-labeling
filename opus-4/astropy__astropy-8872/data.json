{"instance_id": "astropy__astropy-8872", "score": "I", "diff": "diff --git a/astropy/units/quantity.py b/astropy/units/quantity.py\nindex ded609cbe9..e961940385 100644\n--- a/astropy/units/quantity.py\n+++ b/astropy/units/quantity.py\n@@ -377,8 +377,8 @@ class Quantity(np.ndarray, metaclass=InheritDocstrings):\n                             \"Numpy numeric type.\")\n \n         # by default, cast any integer, boolean, etc., to float\n-        if dtype is None and (not (np.can_cast(np.float32, value.dtype)\n-                                   or value.dtype.fields)\n+        if dtype is None and (value.dtype.kind not in 'fc'\n+                              and not value.dtype.fields\n                               or value.dtype.kind == 'O'):\n             value = value.astype(float)\n \ndiff --git a/astropy/units/tests/test_quantity.py b/astropy/units/tests/test_quantity.py\nindex be18e65c5b..b54f3c6d6e 100644\n--- a/astropy/units/tests/test_quantity.py\n+++ b/astropy/units/tests/test_quantity.py\n@@ -142,6 +142,14 @@ class TestQuantityCreation:\n         a3 = np.array([1., 2.], dtype=np.float32)\n         q3 = u.Quantity(a3, u.yr)\n         assert q3.dtype == a3.dtype\n+        # and we should also preserve float16\n+        a3_16 = np.array([1., 2.], dtype=np.float16)\n+        q3_16 = u.Quantity(a3_16, u.yr)\n+        assert q3_16.dtype == a3_16.dtype\n+        # Also test scalar float16 multiplication with unit\n+        f16_scalar = np.float16(1.5)\n+        q_f16 = f16_scalar * u.km\n+        assert q_f16.dtype == np.float16\n         # items stored as objects by numpy should be converted to float\n         # by default\n         q4 = u.Quantity(decimal.Decimal('10.25'), u.m)\n", "gold_standard_diff": "diff --git a/CHANGES.rst b/CHANGES.rst\nindex 0097160cfe61..7f63a54152fa 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -2314,6 +2314,9 @@ astropy.time\n astropy.units\n ^^^^^^^^^^^^^\n \n+- ``Quantity`` now preserves the ``dtype`` for anything that is floating\n+  point, including ``float16``. [#8872]\n+\n astropy.utils\n ^^^^^^^^^^^^^\n \ndiff --git a/astropy/units/quantity.py b/astropy/units/quantity.py\nindex ded609cbe9fc..e3eb8af853dc 100644\n--- a/astropy/units/quantity.py\n+++ b/astropy/units/quantity.py\n@@ -215,8 +215,8 @@ class Quantity(np.ndarray, metaclass=InheritDocstrings):\n     dtype : ~numpy.dtype, optional\n         The dtype of the resulting Numpy array or scalar that will\n         hold the value.  If not provided, it is determined from the input,\n-        except that any input that cannot represent float (integer and bool)\n-        is converted to float.\n+        except that any integer and (non-Quantity) object inputs are converted\n+        to float by default.\n \n     copy : bool, optional\n         If `True` (default), then the value is copied.  Otherwise, a copy will\n@@ -296,8 +296,7 @@ def __new__(cls, value, unit=None, dtype=None, copy=True, order=None,\n                 if not copy:\n                     return value\n \n-                if not (np.can_cast(np.float32, value.dtype) or\n-                        value.dtype.fields):\n+                if value.dtype.kind in 'iu':\n                     dtype = float\n \n             return np.array(value, dtype=dtype, copy=copy, order=order,\n@@ -377,9 +376,7 @@ def __new__(cls, value, unit=None, dtype=None, copy=True, order=None,\n                             \"Numpy numeric type.\")\n \n         # by default, cast any integer, boolean, etc., to float\n-        if dtype is None and (not (np.can_cast(np.float32, value.dtype)\n-                                   or value.dtype.fields)\n-                              or value.dtype.kind == 'O'):\n+        if dtype is None and value.dtype.kind in 'iuO':\n             value = value.astype(float)\n \n         value = value.view(cls)\ndiff --git a/astropy/units/tests/test_quantity.py b/astropy/units/tests/test_quantity.py\nindex be18e65c5bc8..6fbe3db42260 100644\n--- a/astropy/units/tests/test_quantity.py\n+++ b/astropy/units/tests/test_quantity.py\n@@ -138,10 +138,13 @@ def test_preserve_dtype(self):\n         assert q2.value == float(q1.value)\n         assert q2.unit == q1.unit\n \n-        # but we should preserve float32\n-        a3 = np.array([1., 2.], dtype=np.float32)\n-        q3 = u.Quantity(a3, u.yr)\n-        assert q3.dtype == a3.dtype\n+        # but we should preserve any float32 or even float16\n+        a3_32 = np.array([1., 2.], dtype=np.float32)\n+        q3_32 = u.Quantity(a3_32, u.yr)\n+        assert q3_32.dtype == a3_32.dtype\n+        a3_16 = np.array([1., 2.], dtype=np.float16)\n+        q3_16 = u.Quantity(a3_16, u.yr)\n+        assert q3_16.dtype == a3_16.dtype\n         # items stored as objects by numpy should be converted to float\n         # by default\n         q4 = u.Quantity(decimal.Decimal('10.25'), u.m)\n", "gold_standard_pr_link": "https://github.com/astropy/astropy/pull/8872"}