{"instance_id": "sympy__sympy-13798", "score": "I", "diff": "diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py\nindex ad4d7d9613..56573e8141 100644\n--- a/sympy/printing/latex.py\n+++ b/sympy/printing/latex.py\n@@ -156,11 +156,14 @@ def __init__(self, settings=None):\n             \"times\": r\" \\times \"\n         }\n \n-        self._settings['mul_symbol_latex'] = \\\n-            mul_symbol_table[self._settings['mul_symbol']]\n+        mul_symbol = self._settings['mul_symbol']\n+        if isinstance(mul_symbol, str) and mul_symbol not in mul_symbol_table:\n+            self._settings['mul_symbol_latex'] = mul_symbol\n+        else:\n+            self._settings['mul_symbol_latex'] = mul_symbol_table[mul_symbol]\n \n         self._settings['mul_symbol_latex_numbers'] = \\\n-            mul_symbol_table[self._settings['mul_symbol'] or 'dot']\n+            mul_symbol_table[mul_symbol or 'dot']\n \n         self._delim_dict = {'(': ')', '[': ']'}\n \n@@ -2155,10 +2158,12 @@ def latex(expr, **settings):\n     \\frac{1}{2 \\pi} \\int r\\, dr\n \n     mul_symbol: The symbol to use for multiplication. Can be one of None,\n-    \"ldot\", \"dot\", or \"times\".\n+    \"ldot\", \"dot\", \"times\", or any custom string.\n \n     >>> print(latex((2*tau)**sin(Rational(7,2)), mul_symbol=\"times\"))\n     \\left(2 \\times \\tau\\right)^{\\sin{\\left (\\frac{7}{2} \\right )}}\n+    >>> print(latex((2*tau)**sin(Rational(7,2)), mul_symbol=r\"\\,\"))\n+    \\left(2 \\, \\tau\\right)^{\\sin{\\left (\\frac{7}{2} \\right )}}\n \n     inv_trig_style: How inverse trig functions should be displayed. Can be one\n     of \"abbreviated\", \"full\", or \"power\". Defaults to \"abbreviated\".\n", "gold_standard_diff": "From d54b260b8394899843cf52a72aa1d44bbf5c8630 Mon Sep 17 00:00:00 2001\nFrom: Subhash <subhashsaurabh419@gmail.com>\nDate: Tue, 26 Dec 2017 23:29:30 +0530\nSubject: [PATCH 1/4] mul_symbol in latex can take user defined values\n\nmul_symbol can now take user defined values other than the four defined in\nmul_symbol_table\n---\n sympy/printing/latex.py            | 18 ++++++++++++------\n sympy/printing/tests/test_latex.py |  1 +\n 2 files changed, 13 insertions(+), 6 deletions(-)\n\ndiff --git a/sympy/printing/latex.py b/sympy/printing/latex.py\nindex f4eb3143c8af..c4397a54d4b2 100644\n--- a/sympy/printing/latex.py\n+++ b/sympy/printing/latex.py\n@@ -155,12 +155,18 @@ def __init__(self, settings=None):\n             \"dot\": r\" \\cdot \",\n             \"times\": r\" \\times \"\n         }\n-\n-        self._settings['mul_symbol_latex'] = \\\n-            mul_symbol_table[self._settings['mul_symbol']]\n-\n-        self._settings['mul_symbol_latex_numbers'] = \\\n-            mul_symbol_table[self._settings['mul_symbol'] or 'dot']\n+        try:\n+            self._settings['mul_symbol_latex'] = \\\n+                mul_symbol_table[self._settings['mul_symbol']]\n+        except KeyError:\n+            self._settings['mul_symbol_latex'] = \\\n+                self._settings['mul_symbol']\n+        try:\n+            self._settings['mul_symbol_latex_numbers'] = \\\n+                mul_symbol_table[self._settings['mul_symbol'] or 'dot']\n+        except KeyError:\n+            self._settings['mul_symbol_latex_numbers'] = \\\n+                self._settings['mul_symbol'] or mul_symbol_table['dot']\n \n         self._delim_dict = {'(': ')', '[': ']'}\n \ndiff --git a/sympy/printing/tests/test_latex.py b/sympy/printing/tests/test_latex.py\nindex 426c2f62dbb9..295a30f4071d 100644\n--- a/sympy/printing/tests/test_latex.py\n+++ b/sympy/printing/tests/test_latex.py\n@@ -62,6 +62,7 @@ def test_latex_basic():\n \n     assert latex(2*x*y) == \"2 x y\"\n     assert latex(2*x*y, mul_symbol='dot') == r\"2 \\cdot x \\cdot y\"\n+    assert latex(3*x**2*y, mul_symbol='\\,') == r\"3\\,x^{2}\\,y\"\n \n     assert latex(1/x) == r\"\\frac{1}{x}\"\n     assert latex(1/x, fold_short_frac=True) == \"1 / x\"\n\nFrom dca07c78c6ed8e691bd2ba26da2d8f04663e9c26 Mon Sep 17 00:00:00 2001\nFrom: Subhash <subhashsaurabh419@gmail.com>\nDate: Wed, 27 Dec 2017 16:26:32 +0530\nSubject: [PATCH 2/4] Added escaping character\n\n---\n sympy/printing/tests/test_latex.py | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/sympy/printing/tests/test_latex.py b/sympy/printing/tests/test_latex.py\nindex 295a30f4071d..05cf3f04fcd3 100644\n--- a/sympy/printing/tests/test_latex.py\n+++ b/sympy/printing/tests/test_latex.py\n@@ -62,7 +62,7 @@ def test_latex_basic():\n \n     assert latex(2*x*y) == \"2 x y\"\n     assert latex(2*x*y, mul_symbol='dot') == r\"2 \\cdot x \\cdot y\"\n-    assert latex(3*x**2*y, mul_symbol='\\,') == r\"3\\,x^{2}\\,y\"\n+    assert latex(3*x**2*y, mul_symbol='\\\\,') == r\"3\\,x^{2}\\,y\"\n \n     assert latex(1/x) == r\"\\frac{1}{x}\"\n     assert latex(1/x, fold_short_frac=True) == \"1 / x\"\n\nFrom 13e7dbb0a09ab03b388b0e2d1d965187dd874bb5 Mon Sep 17 00:00:00 2001\nFrom: Subhash <subhashsaurabh419@gmail.com>\nDate: Fri, 29 Dec 2017 00:05:16 +0530\nSubject: [PATCH 3/4] Changed setting for mul_symbol_latex_number\n\n---\n sympy/printing/latex.py            | 9 +++++++--\n sympy/printing/tests/test_latex.py | 1 +\n 2 files changed, 8 insertions(+), 2 deletions(-)\n\ndiff --git a/sympy/printing/latex.py b/sympy/printing/latex.py\nindex c4397a54d4b2..1ca45e88ae40 100644\n--- a/sympy/printing/latex.py\n+++ b/sympy/printing/latex.py\n@@ -165,8 +165,13 @@ def __init__(self, settings=None):\n             self._settings['mul_symbol_latex_numbers'] = \\\n                 mul_symbol_table[self._settings['mul_symbol'] or 'dot']\n         except KeyError:\n-            self._settings['mul_symbol_latex_numbers'] = \\\n-                self._settings['mul_symbol'] or mul_symbol_table['dot']\n+            if (self._settings['mul_symbol'] == ' ' or\n+                    self._settings['mul_symbol'] == '\\\\,'):\n+                self._settings['mul_symbol_latex_numbers'] = \\\n+                    mul_symbol_table['dot']\n+            else:\n+                self._settings['mul_symbol_latex_numbers'] = \\\n+                    self._settings['mul_symbol']\n \n         self._delim_dict = {'(': ')', '[': ']'}\n \ndiff --git a/sympy/printing/tests/test_latex.py b/sympy/printing/tests/test_latex.py\nindex 05cf3f04fcd3..6913397dbcf3 100644\n--- a/sympy/printing/tests/test_latex.py\n+++ b/sympy/printing/tests/test_latex.py\n@@ -63,6 +63,7 @@ def test_latex_basic():\n     assert latex(2*x*y) == \"2 x y\"\n     assert latex(2*x*y, mul_symbol='dot') == r\"2 \\cdot x \\cdot y\"\n     assert latex(3*x**2*y, mul_symbol='\\\\,') == r\"3\\,x^{2}\\,y\"\n+    assert latex(1.5*3**x, mul_symbol='\\\\,') == r\"1.5 \\cdot 3^{x}\"\n \n     assert latex(1/x) == r\"\\frac{1}{x}\"\n     assert latex(1/x, fold_short_frac=True) == \"1 / x\"\n\nFrom 00743f29559762bbfd7ff4f195a1d11c0dfd6008 Mon Sep 17 00:00:00 2001\nFrom: Subhash <subhashsaurabh419@gmail.com>\nDate: Sat, 30 Dec 2017 11:19:30 +0530\nSubject: [PATCH 4/4] Added more latex spacing and whitespaces\n\n---\n sympy/printing/latex.py | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/sympy/printing/latex.py b/sympy/printing/latex.py\nindex 1ca45e88ae40..68810dd2a231 100644\n--- a/sympy/printing/latex.py\n+++ b/sympy/printing/latex.py\n@@ -165,8 +165,8 @@ def __init__(self, settings=None):\n             self._settings['mul_symbol_latex_numbers'] = \\\n                 mul_symbol_table[self._settings['mul_symbol'] or 'dot']\n         except KeyError:\n-            if (self._settings['mul_symbol'] == ' ' or\n-                    self._settings['mul_symbol'] == '\\\\,'):\n+            if (self._settings['mul_symbol'].strip() in\n+                    ['', ' ', '\\\\', '\\\\,', '\\\\:', '\\\\;', '\\\\quad']):\n                 self._settings['mul_symbol_latex_numbers'] = \\\n                     mul_symbol_table['dot']\n             else:\n", "gold_standard_pr_link": "https://github.com/sympy/sympy/pull/13798"}