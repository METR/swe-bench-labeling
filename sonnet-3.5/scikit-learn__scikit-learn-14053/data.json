{"instance_id": "scikit-learn__scikit-learn-14053", "score": "C", "diff": "diff --git a/sklearn/tree/export.py b/sklearn/tree/export.py\nindex 1fe11e596..e3876d5e6 100644\n--- a/sklearn/tree/export.py\n+++ b/sklearn/tree/export.py\n@@ -890,9 +890,12 @@ def export_text(decision_tree, feature_names=None, max_depth=10,\n         value_fmt = \"{}{} value: {}\\n\"\n \n     if feature_names:\n-        feature_names_ = [feature_names[i] for i in tree_.feature]\n+        feature_names_ = [feature_names[i] if i != _tree.TREE_UNDEFINED else \"undefined\" for i in tree_.feature]\n     else:\n-        feature_names_ = [\"feature_{}\".format(i) for i in tree_.feature]\n+        feature_names_ = [\"feature_{}\".format(i) if i != _tree.TREE_UNDEFINED else \"undefined\" for i in tree_.feature]\n+    \n+    if not feature_names_:\n+        feature_names_ = [\"feature_0\"]\n \n     export_text.report = \"\"\n \n", "gold_standard_diff": "diff --git a/doc/whats_new/v0.21.rst b/doc/whats_new/v0.21.rst\nindex b945496953f36..44bbbc3ebf6a4 100644\n--- a/doc/whats_new/v0.21.rst\n+++ b/doc/whats_new/v0.21.rst\n@@ -19,6 +19,12 @@ Changelog\n   ``'penalty'`` parameters (regression introduced in 0.21). :pr:`14087` by\n   `Nicolas Hug`_.\n \n+:mod:`sklearn.tree`\n+...................\n+\n+- |Fix| Fixed bug in :func:`tree.export_text` when the tree has one feature and \n+  a single feature name is passed in. :pr:`14053` by `Thomas Fan`\n+\n .. _changes_0_21_2:\n \n Version 0.21.2\ndiff --git a/sklearn/tree/export.py b/sklearn/tree/export.py\nindex 1fe11e596a359..2c9d21b7bb5cc 100644\n--- a/sklearn/tree/export.py\n+++ b/sklearn/tree/export.py\n@@ -890,7 +890,8 @@ def export_text(decision_tree, feature_names=None, max_depth=10,\n         value_fmt = \"{}{} value: {}\\n\"\n \n     if feature_names:\n-        feature_names_ = [feature_names[i] for i in tree_.feature]\n+        feature_names_ = [feature_names[i] if i != _tree.TREE_UNDEFINED\n+                          else None for i in tree_.feature]\n     else:\n         feature_names_ = [\"feature_{}\".format(i) for i in tree_.feature]\n \ndiff --git a/sklearn/tree/tests/test_export.py b/sklearn/tree/tests/test_export.py\nindex 503431f456874..317a11ae25836 100644\n--- a/sklearn/tree/tests/test_export.py\n+++ b/sklearn/tree/tests/test_export.py\n@@ -396,6 +396,21 @@ def test_export_text():\n     assert export_text(reg, decimals=1) == expected_report\n     assert export_text(reg, decimals=1, show_weights=True) == expected_report\n \n+    X_single = [[-2], [-1], [-1], [1], [1], [2]]\n+    reg = DecisionTreeRegressor(max_depth=2, random_state=0)\n+    reg.fit(X_single, y_mo)\n+\n+    expected_report = dedent(\"\"\"\n+    |--- first <= 0.0\n+    |   |--- value: [-1.0, -1.0]\n+    |--- first >  0.0\n+    |   |--- value: [1.0, 1.0]\n+    \"\"\").lstrip()\n+    assert export_text(reg, decimals=1,\n+                       feature_names=['first']) == expected_report\n+    assert export_text(reg, decimals=1, show_weights=True,\n+                       feature_names=['first']) == expected_report\n+\n \n def test_plot_tree_entropy(pyplot):\n     # mostly smoke tests\n", "gold_standard_pr_link": "https://github.com/scikit-learn/scikit-learn/pull/14053"}