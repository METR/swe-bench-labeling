{"instance_id": "pylint-dev__pylint-4970", "score": "I", "diff": "diff --git a/pylint/checkers/similar.py b/pylint/checkers/similar.py\nindex c65b1c893..7fdc02b3a 100644\n--- a/pylint/checkers/similar.py\n+++ b/pylint/checkers/similar.py\n@@ -801,7 +801,10 @@ class SimilarChecker(BaseChecker, Similar, MapReduceMixin):\n         \"\"\"\n         BaseChecker.set_option(self, optname, value, action, optdict)\n         if optname == \"min-similarity-lines\":\n-            self.min_lines = self.config.min_similarity_lines\n+            if self.config.min_similarity_lines == 0:\n+                self.min_lines = sys.maxsize  # Effectively disable the check\n+            else:\n+                self.min_lines = self.config.min_similarity_lines\n         elif optname == \"ignore-comments\":\n             self.ignore_comments = self.config.ignore_comments\n         elif optname == \"ignore-docstrings\":\n", "gold_standard_diff": "From c81eecff6ff1f515f8d645bae52d63022c4da884 Mon Sep 17 00:00:00 2001\nFrom: =?UTF-8?q?Dani=C3=ABl=20van=20Noord?=\n <13665637+DanielNoord@users.noreply.github.com>\nDate: Sun, 5 Sep 2021 21:43:24 +0200\nSubject: [PATCH 1/3] Make ``min-similarity-lines == 0`` stop similarity check\n This makes it so that setting ``min-similarity-lines`` to zero exit the\n similarity code checker with a successful exit. This closes #4901\n\n---\n ChangeLog                          | 4 ++++\n doc/whatsnew/2.11.rst              | 4 ++++\n pylint/checkers/similar.py         | 2 ++\n tests/checkers/unittest_similar.py | 8 ++++++++\n 4 files changed, 18 insertions(+)\n\ndiff --git a/ChangeLog b/ChangeLog\nindex ee1b82af53..818e08af1a 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -63,6 +63,10 @@ Release date: TBA\n \n   Closes #4907\n \n+* Setting ``min-similarity-lines`` to 0 now makes the similarty checker stop checking for duplicate code\n+\n+  Closes #4901\n+\n \n What's New in Pylint 2.10.3?\n ============================\ndiff --git a/doc/whatsnew/2.11.rst b/doc/whatsnew/2.11.rst\nindex cdbba865d4..ac98463027 100644\n--- a/doc/whatsnew/2.11.rst\n+++ b/doc/whatsnew/2.11.rst\n@@ -69,3 +69,7 @@ Other Changes\n * Fix false positive ``superfluous-parens`` for tuples created with inner tuples\n \n   Closes #4907\n+\n+* Setting ``min-similarity-lines`` to 0 now makes the similarty checker stop checking for duplicate code\n+\n+  Closes #4901\ndiff --git a/pylint/checkers/similar.py b/pylint/checkers/similar.py\nindex c65b1c8933..cb002c3db5 100644\n--- a/pylint/checkers/similar.py\n+++ b/pylint/checkers/similar.py\n@@ -919,6 +919,8 @@ def Run(argv=None):\n             ignore_signatures = True\n     if not args:\n         usage(1)\n+    if min_lines == 0:\n+        sys.exit(0)\n     sim = Similar(\n         min_lines, ignore_comments, ignore_docstrings, ignore_imports, ignore_signatures\n     )\ndiff --git a/tests/checkers/unittest_similar.py b/tests/checkers/unittest_similar.py\nindex 4ddf2029a2..c98ea15df5 100644\n--- a/tests/checkers/unittest_similar.py\n+++ b/tests/checkers/unittest_similar.py\n@@ -502,3 +502,11 @@ def test_get_map_data() -> None:\n         # There doesn't seem to be a faster way of doing this, yet.\n         lines = (linespec.text for linespec in lineset_obj.stripped_lines)\n         assert tuple(expected_lines) == tuple(lines)\n+\n+\n+def test_set_duplicate_lines_to_zero() -> None:\n+    output = StringIO()\n+    with redirect_stdout(output), pytest.raises(SystemExit) as ex:\n+        similar.Run([\"--duplicates=0\", SIMILAR1, SIMILAR2])\n+    assert ex.value.code == 0\n+    assert output.getvalue() == \"\"\n\nFrom 695809cee4ba6ea166446d9daa47a953f3b5dc03 Mon Sep 17 00:00:00 2001\nFrom: =?UTF-8?q?Dani=C3=ABl=20van=20Noord?=\n <13665637+DanielNoord@users.noreply.github.com>\nDate: Mon, 6 Sep 2021 00:16:30 +0200\nSubject: [PATCH 2/3] Move check to `run()`\n\n---\n pylint/checkers/similar.py | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/pylint/checkers/similar.py b/pylint/checkers/similar.py\nindex cb002c3db5..20419a67cd 100644\n--- a/pylint/checkers/similar.py\n+++ b/pylint/checkers/similar.py\n@@ -390,6 +390,8 @@ def append_stream(self, streamid: str, stream: TextIO, encoding=None) -> None:\n \n     def run(self) -> None:\n         \"\"\"start looking for similarities and display results on stdout\"\"\"\n+        if self.min_lines == 0:\n+            sys.exit(0)\n         self._display_sims(self._compute_sims())\n \n     def _compute_sims(self) -> List[Tuple[int, Set[LinesChunkLimits_T]]]:\n@@ -919,8 +921,6 @@ def Run(argv=None):\n             ignore_signatures = True\n     if not args:\n         usage(1)\n-    if min_lines == 0:\n-        sys.exit(0)\n     sim = Similar(\n         min_lines, ignore_comments, ignore_docstrings, ignore_imports, ignore_signatures\n     )\n\nFrom 595556861fe8813de1c3162133fef7135b7cca79 Mon Sep 17 00:00:00 2001\nFrom: =?UTF-8?q?Dani=C3=ABl=20van=20Noord?=\n <13665637+DanielNoord@users.noreply.github.com>\nDate: Mon, 6 Sep 2021 00:20:11 +0200\nSubject: [PATCH 3/3] Update similar.py\n\n---\n pylint/checkers/similar.py | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/pylint/checkers/similar.py b/pylint/checkers/similar.py\nindex 20419a67cd..88d7eac525 100644\n--- a/pylint/checkers/similar.py\n+++ b/pylint/checkers/similar.py\n@@ -391,7 +391,7 @@ def append_stream(self, streamid: str, stream: TextIO, encoding=None) -> None:\n     def run(self) -> None:\n         \"\"\"start looking for similarities and display results on stdout\"\"\"\n         if self.min_lines == 0:\n-            sys.exit(0)\n+            return\n         self._display_sims(self._compute_sims())\n \n     def _compute_sims(self) -> List[Tuple[int, Set[LinesChunkLimits_T]]]:\n", "gold_standard_pr_link": "https://github.com/pylint-dev/pylint/pull/4970"}