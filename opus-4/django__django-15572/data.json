{"instance_id": "django__django-15572", "score": "C", "diff": "diff --git a/django/template/autoreload.py b/django/template/autoreload.py\nindex 84c8554165..f3fd704031 100644\n--- a/django/template/autoreload.py\n+++ b/django/template/autoreload.py\n@@ -17,7 +17,7 @@ def get_template_directories():\n         if not isinstance(backend, DjangoTemplates):\n             continue\n \n-        items.update(cwd / to_path(dir) for dir in backend.engine.dirs)\n+        items.update(cwd / to_path(dir) for dir in backend.engine.dirs if dir)\n \n         for loader in backend.engine.template_loaders:\n             if not hasattr(loader, \"get_dirs\"):\n@@ -25,7 +25,7 @@ def get_template_directories():\n             items.update(\n                 cwd / to_path(directory)\n                 for directory in loader.get_dirs()\n-                if not is_django_path(directory)\n+                if directory and not is_django_path(directory)\n             )\n     return items\n \ndiff --git a/tests/template_tests/test_autoreloader.py b/tests/template_tests/test_autoreloader.py\nindex cc2c3f58a5..06b89307c6 100644\n--- a/tests/template_tests/test_autoreloader.py\n+++ b/tests/template_tests/test_autoreloader.py\n@@ -103,6 +103,39 @@ class TemplateReloadTests(SimpleTestCase):\n             },\n         )\n \n+    @override_settings(\n+        TEMPLATES=[\n+            {\n+                \"DIRS\": [\"\", ROOT / \"templates\", \"\"],  # Empty strings should be filtered out\n+                \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n+            }\n+        ]\n+    )\n+    def test_empty_string_in_dirs_filtered(self):\n+        \"\"\"Empty strings in DIRS should be filtered out to avoid CWD being included.\"\"\"\n+        template_dirs = autoreload.get_template_directories()\n+        # CWD should not be in template directories\n+        self.assertNotIn(Path.cwd(), template_dirs)\n+        # Only the valid directory should be included\n+        self.assertSetEqual(template_dirs, {ROOT / \"templates\"})\n+\n+    @override_settings(\n+        TEMPLATES=[\n+            {\n+                \"DIRS\": [\"\"],  # Only empty string\n+                \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n+            }\n+        ]\n+    )\n+    @mock.patch(\"django.template.autoreload.reset_loaders\")\n+    def test_empty_string_dirs_no_false_positives(self, mock_reset):\n+        \"\"\"With only empty strings in DIRS, template_changed should not trigger for arbitrary files.\"\"\"\n+        # Create a test file outside any template directory\n+        test_file = Path.cwd() / \"test_file.html\"\n+        # This should not trigger template reload\n+        self.assertIsNone(autoreload.template_changed(None, test_file))\n+        mock_reset.assert_not_called()\n+\n \n @require_jinja2\n @override_settings(INSTALLED_APPS=[\"template_tests\"])\n", "gold_standard_diff": "From 62739b6e2630e37faa68a86a59fad135cc788cd7 Mon Sep 17 00:00:00 2001\nFrom: Manel Clos <manelclos@gmail.com>\nDate: Sat, 9 Apr 2022 11:36:26 +0200\nSubject: [PATCH] Fixed #33628 -- Ignored directories with empty names in\n autoreloader check for template changes.\n\nRegression in 68357b2ca9e88c40fc00d848799813241be39129.\n---\n django/template/autoreload.py             |  4 ++--\n docs/releases/3.2.13.txt                  | 10 +++++++++-\n docs/releases/4.0.4.txt                   |  7 ++++++-\n tests/template_tests/test_autoreloader.py | 11 +++++++++++\n 4 files changed, 28 insertions(+), 4 deletions(-)\n\ndiff --git a/django/template/autoreload.py b/django/template/autoreload.py\nindex 84c8554165f8..f3fd70403117 100644\n--- a/django/template/autoreload.py\n+++ b/django/template/autoreload.py\n@@ -17,7 +17,7 @@ def get_template_directories():\n         if not isinstance(backend, DjangoTemplates):\n             continue\n \n-        items.update(cwd / to_path(dir) for dir in backend.engine.dirs)\n+        items.update(cwd / to_path(dir) for dir in backend.engine.dirs if dir)\n \n         for loader in backend.engine.template_loaders:\n             if not hasattr(loader, \"get_dirs\"):\n@@ -25,7 +25,7 @@ def get_template_directories():\n             items.update(\n                 cwd / to_path(directory)\n                 for directory in loader.get_dirs()\n-                if not is_django_path(directory)\n+                if directory and not is_django_path(directory)\n             )\n     return items\n \ndiff --git a/docs/releases/3.2.13.txt b/docs/releases/3.2.13.txt\nindex 53de2645c488..c26a969f950a 100644\n--- a/docs/releases/3.2.13.txt\n+++ b/docs/releases/3.2.13.txt\n@@ -4,4 +4,12 @@ Django 3.2.13 release notes\n \n *April 11, 2022*\n \n-Django 3.2.13 fixes two security issues with severity \"high\" in 3.2.12.\n+Django 3.2.13 fixes two security issues with severity \"high\" in\n+3.2.12 and a regression in 3.2.4.\n+\n+Bugfixes\n+========\n+\n+* Fixed a regression in Django 3.2.4 that caused the auto-reloader to no longer\n+  detect changes when the ``DIRS`` option of the ``TEMPLATES`` setting\n+  contained an empty string (:ticket:`33628`).\ndiff --git a/docs/releases/4.0.4.txt b/docs/releases/4.0.4.txt\nindex 67dc19ca9450..6873e78900e5 100644\n--- a/docs/releases/4.0.4.txt\n+++ b/docs/releases/4.0.4.txt\n@@ -4,10 +4,15 @@ Django 4.0.4 release notes\n \n *April 11, 2022*\n \n-Django 4.0.4 fixes two security issues with severity \"high\" and a bug in 4.0.3.\n+Django 4.0.4 fixes two security issues with severity \"high\" and two bugs in\n+4.0.3.\n \n Bugfixes\n ========\n \n * Fixed a regression in Django 4.0 that caused ignoring multiple\n   ``FilteredRelation()`` relationships to the same field (:ticket:`33598`).\n+\n+* Fixed a regression in Django 3.2.4 that caused the auto-reloader to no longer\n+  detect changes when the ``DIRS`` option of the ``TEMPLATES`` setting\n+  contained an empty string (:ticket:`33628`).\ndiff --git a/tests/template_tests/test_autoreloader.py b/tests/template_tests/test_autoreloader.py\nindex cc2c3f58a538..b8c16961bfc0 100644\n--- a/tests/template_tests/test_autoreloader.py\n+++ b/tests/template_tests/test_autoreloader.py\n@@ -81,6 +81,17 @@ def test_reset_all_loaders(self, mock_reset):\n         autoreload.reset_loaders()\n         self.assertEqual(mock_reset.call_count, 2)\n \n+    @override_settings(\n+        TEMPLATES=[\n+            {\n+                \"DIRS\": [\"\"],\n+                \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n+            }\n+        ]\n+    )\n+    def test_template_dirs_ignore_empty_path(self):\n+        self.assertEqual(autoreload.get_template_directories(), set())\n+\n     @override_settings(\n         TEMPLATES=[\n             {\n", "gold_standard_pr_link": "https://github.com/django/django/pull/15572"}