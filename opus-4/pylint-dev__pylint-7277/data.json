{"instance_id": "pylint-dev__pylint-7277", "score": "C", "diff": "diff --git a/pylint/__init__.py b/pylint/__init__.py\nindex 9f3dd74e6..927ea18ce 100644\n--- a/pylint/__init__.py\n+++ b/pylint/__init__.py\n@@ -96,13 +96,18 @@ def modify_sys_path() -> None:\n       if pylint is installed in an editable configuration (as the last item).\n       https://github.com/PyCQA/pylint/issues/4161\n     \"\"\"\n-    sys.path.pop(0)\n-    env_pythonpath = os.environ.get(\"PYTHONPATH\", \"\")\n     cwd = os.getcwd()\n-    if env_pythonpath.startswith(\":\") and env_pythonpath not in (f\":{cwd}\", \":.\"):\n+    # Only remove the first entry if it's \"\", \".\", or the current working directory\n+    if sys.path and sys.path[0] in (\"\", \".\", cwd):\n         sys.path.pop(0)\n+    \n+    env_pythonpath = os.environ.get(\"PYTHONPATH\", \"\")\n+    if env_pythonpath.startswith(\":\") and env_pythonpath not in (f\":{cwd}\", \":.\"):\n+        if sys.path and sys.path[0] in (\"\", \".\", cwd):\n+            sys.path.pop(0)\n     elif env_pythonpath.endswith(\":\") and env_pythonpath not in (f\"{cwd}:\", \".:\"):\n-        sys.path.pop(1)\n+        if len(sys.path) > 1 and sys.path[1] in (\"\", \".\", cwd):\n+            sys.path.pop(1)\n \n \n version = __version__\n", "gold_standard_diff": "From 1f1e837239f4cc75df4b546e82e38a2906151629 Mon Sep 17 00:00:00 2001\nFrom: Karthik Nadig <kanadig@microsoft.com>\nDate: Mon, 8 Aug 2022 16:04:10 -0700\nSubject: [PATCH 1/3] Check for cwd before removing it form `sys.path`.\n\n---\n pylint/__init__.py |  5 +++--\n tests/test_self.py | 18 ++++++++++++++++++\n 2 files changed, 21 insertions(+), 2 deletions(-)\n\ndiff --git a/pylint/__init__.py b/pylint/__init__.py\nindex 9f3dd74e67..8f1eaebe01 100644\n--- a/pylint/__init__.py\n+++ b/pylint/__init__.py\n@@ -96,9 +96,10 @@ def modify_sys_path() -> None:\n       if pylint is installed in an editable configuration (as the last item).\n       https://github.com/PyCQA/pylint/issues/4161\n     \"\"\"\n-    sys.path.pop(0)\n-    env_pythonpath = os.environ.get(\"PYTHONPATH\", \"\")\n     cwd = os.getcwd()\n+    if sys.path[0] in (\"\", \".\", cwd):\n+        sys.path.pop(0)\n+    env_pythonpath = os.environ.get(\"PYTHONPATH\", \"\")\n     if env_pythonpath.startswith(\":\") and env_pythonpath not in (f\":{cwd}\", \":.\"):\n         sys.path.pop(0)\n     elif env_pythonpath.endswith(\":\") and env_pythonpath not in (f\"{cwd}:\", \".:\"):\ndiff --git a/tests/test_self.py b/tests/test_self.py\nindex 7c11601a93..53c9fb11bc 100644\n--- a/tests/test_self.py\n+++ b/tests/test_self.py\n@@ -759,6 +759,24 @@ def test_modify_sys_path() -> None:\n                 modify_sys_path()\n             assert sys.path == paths[1:]\n \n+            paths = [\"\", *default_paths]\n+            sys.path = copy(paths)\n+            with _test_environ_pythonpath():\n+                modify_sys_path()\n+            assert sys.path == paths[1:]\n+\n+            paths = [\".\", *default_paths]\n+            sys.path = copy(paths)\n+            with _test_environ_pythonpath():\n+                modify_sys_path()\n+            assert sys.path == paths[1:]\n+\n+            paths = [\"/do_not_remove\", *default_paths]\n+            sys.path = copy(paths)\n+            with _test_environ_pythonpath():\n+                modify_sys_path()\n+            assert sys.path == paths\n+\n             paths = [cwd, cwd, *default_paths]\n             sys.path = copy(paths)\n             with _test_environ_pythonpath(\".\"):\n\nFrom 32c69e5c57c6f3d369dbab39899b3ecbadc8c10c Mon Sep 17 00:00:00 2001\nFrom: Karthik Nadig <kanadig@microsoft.com>\nDate: Mon, 8 Aug 2022 17:22:46 -0700\nSubject: [PATCH 2/3] Add news.\n\n---\n doc/whatsnew/fragments/7231.bugfix | 3 +++\n 1 file changed, 3 insertions(+)\n create mode 100644 doc/whatsnew/fragments/7231.bugfix\n\ndiff --git a/doc/whatsnew/fragments/7231.bugfix b/doc/whatsnew/fragments/7231.bugfix\nnew file mode 100644\nindex 0000000000..c47fa1d1bc\n--- /dev/null\n+++ b/doc/whatsnew/fragments/7231.bugfix\n@@ -0,0 +1,3 @@\n+Check for `<cwd>` before removing first item form `sys.path` in `modify_sys_path`.\n+\n+Closes #7231\n\nFrom 1f16621bc4afdb02e23315810ca1f618800ace8a Mon Sep 17 00:00:00 2001\nFrom: Jacob Walls <jacobtylerwalls@gmail.com>\nDate: Tue, 9 Aug 2022 07:45:09 -0400\nSubject: [PATCH 3/3] Update doc/whatsnew/fragments/7231.bugfix\n\n---\n doc/whatsnew/fragments/7231.bugfix | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/doc/whatsnew/fragments/7231.bugfix b/doc/whatsnew/fragments/7231.bugfix\nindex c47fa1d1bc..5c8837e423 100644\n--- a/doc/whatsnew/fragments/7231.bugfix\n+++ b/doc/whatsnew/fragments/7231.bugfix\n@@ -1,3 +1,3 @@\n-Check for `<cwd>` before removing first item form `sys.path` in `modify_sys_path`.\n+Check for `<cwd>` before removing first item from `sys.path` in `modify_sys_path`.\n \n Closes #7231\n", "gold_standard_pr_link": "https://github.com/pylint-dev/pylint/pull/7277"}