{"instance_id": "pylint-dev__pylint-7080", "score": "I", "diff": "diff --git a/pylintrc b/pylintrc\nindex 5e7a6193e..dcc434bc1 100644\n--- a/pylintrc\n+++ b/pylintrc\n@@ -14,6 +14,7 @@ ignore=CVS\n # Add files or directories matching the regex patterns to the ignore-list. The\n # regex matches against paths and can be in Posix or Windows format.\n ignore-paths=\n+    ^src/gen/.*$\n \n # Files or directories matching the regex patterns are skipped. The regex\n # matches against base names, not paths.\n", "gold_standard_diff": "From d060f7726b77e82f64f5b550c51ba0405ff0d42f Mon Sep 17 00:00:00 2001\nFrom: Matus Valo <matusvalo@gmail.com>\nDate: Tue, 28 Jun 2022 19:14:06 +0200\nSubject: [PATCH 1/5] normalize path before checking if path should be ignored\n\n---\n pylint/lint/expand_modules.py |  1 +\n tests/test_self.py            | 21 +++++++++++++++++++++\n 2 files changed, 22 insertions(+)\n\ndiff --git a/pylint/lint/expand_modules.py b/pylint/lint/expand_modules.py\nindex 5cacc0371e..289e1afce5 100644\n--- a/pylint/lint/expand_modules.py\n+++ b/pylint/lint/expand_modules.py\n@@ -52,6 +52,7 @@ def _is_ignored_file(\n     ignore_list_re: list[Pattern[str]],\n     ignore_list_paths_re: list[Pattern[str]],\n ) -> bool:\n+    element = os.path.normpath(element)\n     basename = os.path.basename(element)\n     return (\n         basename in ignore_list\ndiff --git a/tests/test_self.py b/tests/test_self.py\nindex c18a04aef6..e75566a05c 100644\n--- a/tests/test_self.py\n+++ b/tests/test_self.py\n@@ -1330,6 +1330,27 @@ def test_recursive_current_dir(self):\n                     code=0,\n                 )\n \n+    def test_ignore_path_recursive_current_dir(self):\n+        \"\"\"Tests that path is normalized before checked that is ignored. Github bug #6964\"\"\"\n+        with _test_sys_path():\n+            # pytest is including directory HERE/regrtest_data to sys.path which causes\n+            # astroid to believe that directory is a package.\n+            sys.path = [\n+                path\n+                for path in sys.path\n+                if not os.path.basename(path) == \"regrtest_data\"\n+            ]\n+            with _test_cwd():\n+                os.chdir(join(HERE, \"regrtest_data\", \"directory\"))\n+                self._runtest(\n+                    [\n+                        \".\",\n+                        \"--recursive=y\",\n+                        \"--ignore-paths=^ignored_subdirectory/.*\",\n+                    ],\n+                    code=0,\n+                )\n+\n     def test_regression_recursive_current_dir(self):\n         with _test_sys_path():\n             # pytest is including directory HERE/regrtest_data to sys.path which causes\n\nFrom 5dcdafc3ee6d6c5ced54c5aaa3f66c80e8dafb74 Mon Sep 17 00:00:00 2001\nFrom: Matus Valo <matusvalo@users.noreply.github.com>\nDate: Tue, 28 Jun 2022 19:31:18 +0200\nSubject: [PATCH 2/5] Update tests/test_self.py\n\nCo-authored-by: Pierre Sassoulas <pierre.sassoulas@gmail.com>\n---\n tests/test_self.py | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/tests/test_self.py b/tests/test_self.py\nindex e75566a05c..5ceceecf21 100644\n--- a/tests/test_self.py\n+++ b/tests/test_self.py\n@@ -1330,7 +1330,7 @@ def test_recursive_current_dir(self):\n                     code=0,\n                 )\n \n-    def test_ignore_path_recursive_current_dir(self):\n+    def test_ignore_path_recursive_current_dir(self) ->None:\n         \"\"\"Tests that path is normalized before checked that is ignored. Github bug #6964\"\"\"\n         with _test_sys_path():\n             # pytest is including directory HERE/regrtest_data to sys.path which causes\n\nFrom 04754e1ca8dc3972f7f582355b1b02c948057452 Mon Sep 17 00:00:00 2001\nFrom: \"pre-commit-ci[bot]\"\n <66853113+pre-commit-ci[bot]@users.noreply.github.com>\nDate: Tue, 28 Jun 2022 17:33:25 +0000\nSubject: [PATCH 3/5] [pre-commit.ci] auto fixes from pre-commit.com hooks\n\nfor more information, see https://pre-commit.ci\n---\n tests/test_self.py | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/tests/test_self.py b/tests/test_self.py\nindex 5ceceecf21..77a8428228 100644\n--- a/tests/test_self.py\n+++ b/tests/test_self.py\n@@ -1330,7 +1330,7 @@ def test_recursive_current_dir(self):\n                     code=0,\n                 )\n \n-    def test_ignore_path_recursive_current_dir(self) ->None:\n+    def test_ignore_path_recursive_current_dir(self) -> None:\n         \"\"\"Tests that path is normalized before checked that is ignored. Github bug #6964\"\"\"\n         with _test_sys_path():\n             # pytest is including directory HERE/regrtest_data to sys.path which causes\n\nFrom 8c7b929be9635a85703a005f96f52468d81437ab Mon Sep 17 00:00:00 2001\nFrom: Matus Valo <matusvalo@gmail.com>\nDate: Tue, 28 Jun 2022 19:39:39 +0200\nSubject: [PATCH 4/5] Added Changelog entry\n\n---\n doc/whatsnew/2/2.14/full.rst | 5 +++++\n 1 file changed, 5 insertions(+)\n\ndiff --git a/doc/whatsnew/2/2.14/full.rst b/doc/whatsnew/2/2.14/full.rst\nindex 77d8bf9d71..953f17688a 100644\n--- a/doc/whatsnew/2/2.14/full.rst\n+++ b/doc/whatsnew/2/2.14/full.rst\n@@ -5,6 +5,11 @@ What's New in Pylint 2.14.4?\n ----------------------------\n Release date: TBA\n \n+* Fixed an issue where scanning `.` directory recursively with ``--ignore-path=^path/to/dir`` is not\n+  ignoring the `path/to/dir` directory.\n+\n+  Closes #6964\n+\n * Fixed regression that didn't allow quoted ``init-hooks`` in option files.\n \n   Closes #7006\n\nFrom c744a5357abfd30b84de9d171c901de4d555669b Mon Sep 17 00:00:00 2001\nFrom: Matus Valo <matusvalo@gmail.com>\nDate: Tue, 28 Jun 2022 20:13:00 +0200\nSubject: [PATCH 5/5] Fixed docstring typo\n\n---\n tests/test_self.py | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/tests/test_self.py b/tests/test_self.py\nindex 77a8428228..d745161c54 100644\n--- a/tests/test_self.py\n+++ b/tests/test_self.py\n@@ -1331,7 +1331,7 @@ def test_recursive_current_dir(self):\n                 )\n \n     def test_ignore_path_recursive_current_dir(self) -> None:\n-        \"\"\"Tests that path is normalized before checked that is ignored. Github bug #6964\"\"\"\n+        \"\"\"Tests that path is normalized before checked that is ignored. GitHub issue #6964\"\"\"\n         with _test_sys_path():\n             # pytest is including directory HERE/regrtest_data to sys.path which causes\n             # astroid to believe that directory is a package.\n", "gold_standard_pr_link": "https://github.com/pylint-dev/pylint/pull/7080"}