{"instance_id": "django__django-14792", "score": "I", "diff": "diff --git a/django/utils/timezone.py b/django/utils/timezone.py\nindex bb2b6b9594..b966b05a23 100644\n--- a/django/utils/timezone.py\n+++ b/django/utils/timezone.py\n@@ -73,7 +73,19 @@ def get_current_timezone_name():\n \n def _get_timezone_name(timezone):\n     \"\"\"Return the name of ``timezone``.\"\"\"\n-    return str(timezone)\n+    name = str(timezone)\n+    if name.startswith('Etc/GMT'):\n+        # Handle Etc/GMT time zones\n+        offset = name.split('GMT', 1)[1]\n+        if offset:\n+            # Reverse the sign for Etc/GMT time zones\n+            if offset.startswith('-'):\n+                return '+' + offset[1:]\n+            elif offset.startswith('+'):\n+                return '-' + offset[1:]\n+            else:\n+                return offset\n+    return name\n \n # Timezone selection functions.\n \n", "gold_standard_diff": "From cbba49971bbbbe3e8c6685e4ce6ab87b1187ae87 Mon Sep 17 00:00:00 2001\nFrom: Carlton Gibson <carlton.gibson@noumenal.es>\nDate: Tue, 24 Aug 2021 11:21:32 +0200\nSubject: [PATCH] Fixed #32992 -- Restored offset extraction for fixed offset\n timezones.\n\nRegression in 10d126198434810529e0220b0c6896ed64ca0e88.\n---\n django/utils/timezone.py           |  7 +++++--\n docs/releases/3.2.7.txt            |  3 ++-\n tests/utils_tests/test_timezone.py | 25 +++++++++++++++++++++++++\n 3 files changed, 32 insertions(+), 3 deletions(-)\n\ndiff --git a/django/utils/timezone.py b/django/utils/timezone.py\nindex bb2b6b95943c..0f5d012c593f 100644\n--- a/django/utils/timezone.py\n+++ b/django/utils/timezone.py\n@@ -72,8 +72,11 @@ def get_current_timezone_name():\n \n \n def _get_timezone_name(timezone):\n-    \"\"\"Return the name of ``timezone``.\"\"\"\n-    return str(timezone)\n+    \"\"\"\n+    Return the offset for fixed offset timezones, or the name of timezone if\n+    not set.\n+    \"\"\"\n+    return timezone.tzname(None) or str(timezone)\n \n # Timezone selection functions.\n \ndiff --git a/docs/releases/3.2.7.txt b/docs/releases/3.2.7.txt\nindex 0219460649d2..644e71dafdd8 100644\n--- a/docs/releases/3.2.7.txt\n+++ b/docs/releases/3.2.7.txt\n@@ -9,4 +9,5 @@ Django 3.2.7 fixes several bugs in 3.2.6.\n Bugfixes\n ========\n \n-* ...\n+* Fixed a regression in Django 3.2 that caused the incorrect offset extraction\n+  from fixed offset timezones (:ticket:`32992`).\ndiff --git a/tests/utils_tests/test_timezone.py b/tests/utils_tests/test_timezone.py\nindex 2e28d3a9a5fa..0972135dcc1f 100644\n--- a/tests/utils_tests/test_timezone.py\n+++ b/tests/utils_tests/test_timezone.py\n@@ -260,6 +260,31 @@ def test_make_aware_zoneinfo_non_existent(self):\n         self.assertEqual(std.utcoffset(), datetime.timedelta(hours=1))\n         self.assertEqual(dst.utcoffset(), datetime.timedelta(hours=2))\n \n+    def test_get_timezone_name(self):\n+        \"\"\"\n+        The _get_timezone_name() helper must return the offset for fixed offset\n+        timezones, for usage with Trunc DB functions.\n+\n+        The datetime.timezone examples show the current behavior.\n+        \"\"\"\n+        tests = [\n+            # datetime.timezone, fixed offset with and without `name`.\n+            (datetime.timezone(datetime.timedelta(hours=10)), 'UTC+10:00'),\n+            (datetime.timezone(datetime.timedelta(hours=10), name='Etc/GMT-10'), 'Etc/GMT-10'),\n+            # pytz, named and fixed offset.\n+            (pytz.timezone('Europe/Madrid'), 'Europe/Madrid'),\n+            (pytz.timezone('Etc/GMT-10'), '+10'),\n+        ]\n+        if HAS_ZONEINFO:\n+            tests += [\n+                # zoneinfo, named and fixed offset.\n+                (zoneinfo.ZoneInfo('Europe/Madrid'), 'Europe/Madrid'),\n+                (zoneinfo.ZoneInfo('Etc/GMT-10'), '+10'),\n+            ]\n+        for tz, expected in tests:\n+            with self.subTest(tz=tz, expected=expected):\n+                self.assertEqual(timezone._get_timezone_name(tz), expected)\n+\n     def test_get_default_timezone(self):\n         self.assertEqual(timezone.get_default_timezone_name(), 'America/Chicago')\n \n", "gold_standard_pr_link": "https://github.com/django/django/pull/14792"}